<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لعبة البحث عن الكنز - الصف الرابع</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 200% 200%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Floating stars background */
        .star {
            position: fixed;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
            z-index: 0;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            position: relative;
            z-index: 1;
        }

        /* Header with teacher name */
        .header {
            text-align: center;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(240, 147, 251, 0.3);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '✨';
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 2em;
            animation: float 3s ease-in-out infinite;
        }

        .header::after {
            content: '✨';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 2em;
            animation: float 3s ease-in-out infinite;
            animation-delay: 1.5s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .teacher-name {
            font-size: 1.3em;
            color: white;
            margin-bottom: 5px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-weight: bold;
        }

        h1 {
            text-align: center;
            color: #ff6b6b;
            font-size: 2.8em;
            margin: 0;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.2);
            animation: titlePulse 2s ease-in-out infinite;
        }

        @keyframes titlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.2em;
            font-weight: bold;
        }

        /* Teams Section */
        .teams-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .team {
            background: white;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            transition: all 0.3s;
            border: 4px solid;
            position: relative;
            overflow: hidden;
        }

        .team::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .team:hover {
            transform: translateY(-10px) scale(1.05);
        }

        .team.red { border-color: #ff6b6b; background: linear-gradient(135deg, #fff 0%, #ffe0e0 100%); }
        .team.blue { border-color: #4ecdc4; background: linear-gradient(135deg, #fff 0%, #e0f7f5 100%); }
        .team.green { border-color: #95e1d3; background: linear-gradient(135deg, #fff 0%, #e8f8f5 100%); }
        .team.yellow { border-color: #f9ca24; background: linear-gradient(135deg, #fff 0%, #fff8e0 100%); }

        .team-icon {
            font-size: 3.5em;
            margin-bottom: 10px;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .team-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .team-score {
            font-size: 2.2em;
            font-weight: bold;
            color: #333;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .team-position {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .deduct-btn {
            margin-top: 10px;
            padding: 10px 18px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255,107,107,0.4);
        }

        .deduct-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255,107,107,0.6);
        }

        /* Map Section */
        .map-container {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            min-height: 350px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .map-title {
            text-align: center;
            font-size: 1.8em;
            color: #333;
            margin-bottom: 20px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(255,255,255,0.8);
        }

        .team-path {
            position: relative;
            margin: 15px 0;
            padding: 12px;
            background: rgba(255,255,255,0.4);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .path {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .checkpoint {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: white;
            border: 4px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3em;
            position: relative;
            z-index: 2;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        .checkpoint:hover {
            transform: scale(1.2) rotate(360deg);
        }

        .checkpoint.treasure {
            background: linear-gradient(135deg, #f9ca24, #f0932b);
            font-size: 1.8em;
            width: 55px;
            height: 55px;
            animation: treasurePulse 2s infinite;
            box-shadow: 0 0 30px rgba(249, 202, 36, 0.8);
        }

        @keyframes treasurePulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(10deg); }
        }

        .path-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            z-index: 1;
        }

        .team-path.red .path-line { background: linear-gradient(90deg, #ff6b6b, #ee5a52); }
        .team-path.blue .path-line { background: linear-gradient(90deg, #4ecdc4, #44a39b); }
        .team-path.green .path-line { background: linear-gradient(90deg, #95e1d3, #7fccc0); }
        .team-path.yellow .path-line { background: linear-gradient(90deg, #f9ca24, #f0932b); }

        .team-marker {
            position: absolute;
            font-size: 2em;
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 3;
            top: 50%;
            transform: translateY(-50%);
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.3));
        }

        .path-label {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            font-size: 1em;
            padding: 8px 15px;
            border-radius: 20px;
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .team-path.red .path-label { background: linear-gradient(135deg, #ff6b6b, #ee5a52); }
        .team-path.blue .path-label { background: linear-gradient(135deg, #4ecdc4, #44a39b); }
        .team-path.green .path-label { background: linear-gradient(135deg, #95e1d3, #7fccc0); }
        .team-path.yellow .path-label { background: linear-gradient(135deg, #f9ca24, #f0932b); }

        /* Timer Section */
        .timer-container {
            text-align: center;
            margin: 25px 0;
            position: relative;
        }

        .timer {
            display: inline-block;
            font-size: 4.5em;
            font-weight: bold;
            color: #51cf66;
            background: white;
            border: 6px solid #51cf66;
            border-radius: 50%;
            width: 170px;
            height: 170px;
            line-height: 158px;
            box-shadow: 0 10px 30px rgba(81, 207, 102, 0.4);
            transition: all 0.3s;
            position: relative;
        }

        .timer::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border-radius: 50%;
            border: 3px solid currentColor;
            opacity: 0;
            animation: timerRing 2s infinite;
        }

        @keyframes timerRing {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.2); opacity: 0; }
        }

        .timer.warning {
            color: #f9ca24;
            border-color: #f9ca24;
            animation: timerWarn 0.5s infinite;
            box-shadow: 0 10px 30px rgba(249, 202, 36, 0.6);
        }

        .timer.danger {
            color: #ff6b6b;
            border-color: #ff6b6b;
            animation: timerDanger 0.3s infinite;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.8);
        }

        @keyframes timerWarn {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes timerDanger {
            0%, 100% { transform: rotate(-3deg) scale(1); }
            50% { transform: rotate(3deg) scale(1.08); }
        }

        .timer-label {
            display: block;
            margin-top: 15px;
            font-size: 1.3em;
            color: #666;
            font-weight: bold;
        }

        /* Encouragement messages */
        .encouragement {
            text-align: center;
            font-size: 2em;
            font-weight: bold;
            margin: 20px 0;
            padding: 15px;
            border-radius: 15px;
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.5s;
            box-shadow: 0 10px 30px rgba(240, 147, 251, 0.4);
        }

        .encouragement.show {
            opacity: 1;
            transform: scale(1);
        }

        /* Question Section */
        .question-container {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 4px solid #dee2e6;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .current-team {
            text-align: center;
            font-size: 1.6em;
            margin-bottom: 20px;
            padding: 18px;
            border-radius: 15px;
            font-weight: bold;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: teamGlow 2s ease-in-out infinite;
        }

        @keyframes teamGlow {
            0%, 100% { box-shadow: 0 5px 20px rgba(0,0,0,0.2); }
            50% { box-shadow: 0 8px 30px rgba(0,0,0,0.4); }
        }

        .question {
            background: white;
            padding: 28px;
            border-radius: 15px;
            margin-bottom: 20px;
            font-size: 1.4em;
            line-height: 1.9;
            border-right: 6px solid #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .question-type {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 0.85em;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .answers {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .answer-btn {
            padding: 22px;
            font-size: 1.15em;
            border: 3px solid #dee2e6;
            background: white;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: right;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .answer-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .answer-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .answer-btn:hover {
            background: #f8f9fa;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            border-color: #667eea;
        }

        .answer-btn.correct {
            background: linear-gradient(135deg, #51cf66, #37b24d);
            color: white;
            border-color: #51cf66;
            animation: correctPulse 0.5s;
            box-shadow: 0 0 30px rgba(81, 207, 102, 0.8);
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .answer-btn.wrong {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            border-color: #ff6b6b;
            animation: wrongShake 0.5s;
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .answer-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f0f;
            position: absolute;
            animation: confetti-fall 3s linear forwards;
            z-index: 1000;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Control Buttons */
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 16px 35px;
            font-size: 1.15em;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #51cf66, #37b24d);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #868e96, #495057);
            color: white;
        }

        /* Winner Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 60px;
            border-radius: 30px;
            text-align: center;
            max-width: 600px;
            animation: modalAppear 0.5s;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        @keyframes modalAppear {
            from { transform: scale(0.3) rotate(-10deg); opacity: 0; }
            to { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .modal-content h2 {
            font-size: 3.5em;
            color: white;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
        }

        .modal-content .trophy {
            font-size: 6em;
            margin: 20px 0;
            animation: trophyRotate 3s ease-in-out infinite;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
        }

        @keyframes trophyRotate {
            0%, 100% { transform: rotate(-15deg) scale(1); }
            50% { transform: rotate(15deg) scale(1.1); }
        }

        .fireworks {
            font-size: 3.5em;
            margin: 20px;
            animation: fireworksPop 1s ease-in-out infinite;
        }

        @keyframes fireworksPop {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        /* Stats */
        .stats {
            text-align: center;
            margin: 25px 0;
            padding: 20px;
            background: linear-gradient(135deg, #e9ecef, #dee2e6);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stats span {
            margin: 0 20px;
            font-size: 1.15em;
            font-weight: bold;
        }

        /* Deduction Modal */
        .deduction-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .deduction-content {
            background: white;
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            animation: modalAppear 0.3s;
        }

        .deduction-content h3 {
            margin-bottom: 20px;
            color: #ff6b6b;
            font-size: 1.8em;
        }

        .deduction-input {
            width: 100%;
            padding: 15px;
            font-size: 1.3em;
            border: 3px solid #dee2e6;
            border-radius: 15px;
            margin: 15px 0;
            text-align: center;
            transition: all 0.3s;
        }

        .deduction-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .footer-text {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .footer-signature {
            font-size: 1.5em;
            font-weight: bold;
            margin-top: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .teams-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .teams-container {
                grid-template-columns: 1fr;
            }
            
            .answers {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2em;
            }

            .timer {
                font-size: 3em;
                width: 130px;
                height: 130px;
                line-height: 118px;
            }
        }
    </style>
</head>
<body>
    <!-- Floating stars background -->
    <script>
        for(let i = 0; i < 50; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            document.body.appendChild(star);
        }
    </script>

    <div class="container">
        <!-- Header with teacher name -->
        <div class="header">
            <div class="teacher-name">⭐ تصميم وإعداد ⭐</div>
            <h1>المعلم عبدالحكيم الهبيش</h1>
        </div>

        <h1>🏴‍☠️ لعبة البحث عن الكنز المفقود 🏴‍☠️</h1>
        <p class="subtitle">⚡ سباق مشوق مليء بالإثارة والتحدي للوصول إلى الكنز! ⚡</p>

        <!-- Encouragement message -->
        <div class="encouragement" id="encouragement"></div>

        <!-- Teams Section -->
        <div class="teams-container">
            <div class="team red">
                <div class="team-icon">🦁</div>
                <div class="team-name">الأسود الحمراء</div>
                <div class="team-score" id="team1-score">0</div>
                <div class="team-position" id="team1-position">المحطة: 0/10</div>
                <button class="deduct-btn" onclick="openDeductModal(0)">➖ خصم نقاط</button>
            </div>
            <div class="team blue">
                <div class="team-icon">🐬</div>
                <div class="team-name">الدلافين الزرقاء</div>
                <div class="team-score" id="team2-score">0</div>
                <div class="team-position" id="team2-position">المحطة: 0/10</div>
                <button class="deduct-btn" onclick="openDeductModal(1)">➖ خصم نقاط</button>
            </div>
            <div class="team green">
                <div class="team-icon">🐢</div>
                <div class="team-name">السلاحف الخضراء</div>
                <div class="team-score" id="team3-score">0</div>
                <div class="team-position" id="team3-position">المحطة: 0/10</div>
                <button class="deduct-btn" onclick="openDeductModal(2)">➖ خصم نقاط</button>
            </div>
            <div class="team yellow">
                <div class="team-icon">🦅</div>
                <div class="team-name">النسور الذهبية</div>
                <div class="team-score" id="team4-score">0</div>
                <div class="team-position" id="team4-position">المحطة: 0/10</div>
                <button class="deduct-btn" onclick="openDeductModal(3)">➖ خصم نقاط</button>
            </div>
        </div>

        <!-- Map Section -->
        <div class="map-container">
            <div class="map-title">🗺️ خريطة الرحلة إلى الكنز 🗺️</div>
            
            <!-- Team 1 Path -->
            <div class="team-path red">
                <div class="path-label">🦁 الأسود</div>
                <div class="path">
                    <div class="path-line"></div>
                    <div class="checkpoint">🏁</div>
                    <div class="checkpoint">1</div>
                    <div class="checkpoint">2</div>
                    <div class="checkpoint">3</div>
                    <div class="checkpoint">4</div>
                    <div class="checkpoint">5</div>
                    <div class="checkpoint">6</div>
                    <div class="checkpoint">7</div>
                    <div class="checkpoint">8</div>
                    <div class="checkpoint">9</div>
                    <div class="checkpoint treasure">💎</div>
                    <div class="team-marker" id="marker1" style="right: 0;">🦁</div>
                </div>
            </div>

            <!-- Team 2 Path -->
            <div class="team-path blue">
                <div class="path-label">🐬 الدلافين</div>
                <div class="path">
                    <div class="path-line"></div>
                    <div class="checkpoint">🏁</div>
                    <div class="checkpoint">1</div>
                    <div class="checkpoint">2</div>
                    <div class="checkpoint">3</div>
                    <div class="checkpoint">4</div>
                    <div class="checkpoint">5</div>
                    <div class="checkpoint">6</div>
                    <div class="checkpoint">7</div>
                    <div class="checkpoint">8</div>
                    <div class="checkpoint">9</div>
                    <div class="checkpoint treasure">💎</div>
                    <div class="team-marker" id="marker2" style="right: 0;">🐬</div>
                </div>
            </div>

            <!-- Team 3 Path -->
            <div class="team-path green">
                <div class="path-label">🐢 السلاحف</div>
                <div class="path">
                    <div class="path-line"></div>
                    <div class="checkpoint">🏁</div>
                    <div class="checkpoint">1</div>
                    <div class="checkpoint">2</div>
                    <div class="checkpoint">3</div>
                    <div class="checkpoint">4</div>
                    <div class="checkpoint">5</div>
                    <div class="checkpoint">6</div>
                    <div class="checkpoint">7</div>
                    <div class="checkpoint">8</div>
                    <div class="checkpoint">9</div>
                    <div class="checkpoint treasure">💎</div>
                    <div class="team-marker" id="marker3" style="right: 0;">🐢</div>
                </div>
            </div>

            <!-- Team 4 Path -->
            <div class="team-path yellow">
                <div class="path-label">🦅 النسور</div>
                <div class="path">
                    <div class="path-line"></div>
                    <div class="checkpoint">🏁</div>
                    <div class="checkpoint">1</div>
                    <div class="checkpoint">2</div>
                    <div class="checkpoint">3</div>
                    <div class="checkpoint">4</div>
                    <div class="checkpoint">5</div>
                    <div class="checkpoint">6</div>
                    <div class="checkpoint">7</div>
                    <div class="checkpoint">8</div>
                    <div class="checkpoint">9</div>
                    <div class="checkpoint treasure">💎</div>
                    <div class="team-marker" id="marker4" style="right: 0;">🦅</div>
                </div>
            </div>
        </div>

        <!-- Timer Section -->
        <div class="timer-container">
            <div class="timer" id="timer">30</div>
            <span class="timer-label">⏱️ الوقت المتبقي (ثانية)</span>
        </div>

        <!-- Stats -->
        <div class="stats">
            <span>🎯 الفريق الحالي: <strong id="current-team-name">الأسود الحمراء</strong></span>
            <span>📊 السؤال رقم: <strong id="question-number">1</strong></span>
            <span>📚 الأسئلة المتبقية: <strong id="remaining-questions">100</strong></span>
        </div>

        <!-- Question Section -->
        <div class="question-container">
            <div class="current-team" id="current-team-display">
                دور الفريق: الأسود الحمراء 🦁
            </div>
            <div class="question">
                <div class="question-type" id="question-type">رياضيات</div>
                <div id="question-text">جاري تحميل السؤال...</div>
            </div>
            <div class="answers" id="answers-container">
                <!-- Answers will be inserted here -->
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="showQuestion()" id="new-question-btn">📝 سؤال جديد</button>
                <button class="btn btn-success" onclick="correctAnswer()" id="correct-btn">✅ إجابة صحيحة</button>
                <button class="btn btn-danger" onclick="wrongAnswer()" id="wrong-btn">❌ إجابة خاطئة</button>
                <button class="btn btn-secondary" onclick="skipQuestion()" id="skip-btn">⏭️ تخطي السؤال</button>
                <button class="btn btn-secondary" onclick="pauseTimer()" id="pause-btn">⏸️ إيقاف المؤقت</button>
                <button class="btn btn-secondary" onclick="resetGame()">🔄 إعادة اللعبة</button>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-text">🌟 لعبة تعليمية مبتكرة للصف الرابع 🌟</div>
            <div class="footer-signature">✨ تصميم: المعلم عبدالحكيم الهبيش ✨</div>
            <div style="margin-top: 10px; font-size: 0.9em;">💡 التعليم بالترفيه هو مفتاح النجاح 💡</div>
        </div>
    </div>

    <!-- Winner Modal -->
    <div class="modal" id="winner-modal">
        <div class="modal-content">
            <div class="fireworks">🎆🎇✨🎊🎉</div>
            <h2>مبروك! 🎉</h2>
            <div class="trophy">🏆</div>
            <h3 id="winner-text" style="color: white; font-size: 2em; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">الفريق الفائز</h3>
            <p style="font-size: 1.4em; margin: 20px 0; color: white; font-weight: bold;">وصلتم إلى الكنز! 💎✨</p>
            <div class="fireworks">🎊🎈🎁🌟⭐</div>
            <button class="btn btn-primary" onclick="closeModal()" style="margin-top: 20px; font-size: 1.2em;">إغلاق</button>
        </div>
    </div>

    <!-- Deduction Modal -->
    <div class="deduction-modal" id="deduction-modal">
        <div class="deduction-content">
            <h3>خصم نقاط من <span id="deduct-team-name"></span></h3>
            <p style="font-size: 1.1em;">أدخل عدد النقاط المراد خصمها:</p>
            <input type="number" class="deduction-input" id="deduction-amount" min="1" value="1">
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn btn-danger" onclick="confirmDeduction()" style="flex: 1;">تأكيد الخصم</button>
                <button class="btn btn-secondary" onclick="closeDeductModal()" style="flex: 1;">إلغاء</button>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let currentTeam = 0;
        let teams = [
            { name: 'الأسود الحمراء', icon: '🦁', score: 0, position: 0, color: '#ff6b6b' },
            { name: 'الدلافين الزرقاء', icon: '🐬', score: 0, position: 0, color: '#4ecdc4' },
            { name: 'السلاحف الخضراء', icon: '🐢', score: 0, position: 0, color: '#95e1d3' },
            { name: 'النسور الذهبية', icon: '🦅', score: 0, position: 0, color: '#f9ca24' }
        ];
        let questionCount = 0;
        const maxPosition = 10;
        let timerInterval = null;
        let timeLeft = 30;
        let timerPaused = false;
        let selectedTeamForDeduction = 0;

        // Encouragement messages
        const correctMessages = [
            '🌟 رائع! إجابة صحيحة!',
            '⭐ ممتاز! أحسنتم!',
            '🎯 دقة عالية! برافو!',
            '💪 قوة! استمروا!',
            '🔥 عمل رائع! أنتم الأفضل!',
            '✨ مذهل! واصلوا التفوق!',
            '🚀 إجابة خارقة!',
            '💎 ذهبي! إبداع!',
        ];

        const wrongMessages = [
            '💪 لا بأس! المحاولة القادمة أفضل!',
            '⚡ تعلمنا من الخطأ!',
            '🌈 الخطأ طريق النجاح!',
            '🎯 قريبون جداً! ركزوا!',
            '💡 تذكروا ما تعلمتم!',
        ];

        // Questions Database - نفس الـ 100 سؤال السابقة
        const questions = [
            // أسئلة رياضيات (20 سؤال)
            {
                type: 'رياضيات',
                question: 'إذا كان لديك 24 تفاحة وتريد توزيعها بالتساوي على 6 أصدقاء، كم تفاحة يحصل كل صديق؟',
                answers: ['3 تفاحات', '4 تفاحات', '5 تفاحات', '6 تفاحات'],
                correct: 1
            },
            {
                type: 'رياضيات',
                question: 'ما ناتج: 7 × 8 = ؟',
                answers: ['54', '56', '48', '64'],
                correct: 1
            },
            {
                type: 'رياضيات',
                question: 'إذا كان عمر أحمد 9 سنوات، وعمر أخته نصف عمره، فكم عمر أخته؟',
                answers: ['3 سنوات', '4 سنوات', '4.5 سنوات', '5 سنوات'],
                correct: 2
            },
            {
                type: 'رياضيات',
                question: 'ما هو الرقم الذي إذا ضربته في نفسه يعطيك 49؟',
                answers: ['6', '7', '8', '9'],
                correct: 1
            },
            {
                type: 'رياضيات',
                question: 'كم عدد الأضلاع في المثلث؟',
                answers: ['2', '3', '4', '5'],
                correct: 1
            },
            {
                type: 'رياضيات',
                question: 'ما ناتج: 100 - 37 = ؟',
                answers: ['63', '73', '67', '53'],
                correct: 0
            },
            {
                type: 'رياضيات',
                question: 'ما هو نصف الرقم 50؟',
                answers: ['20', '25', '30', '35'],
                correct: 1
            },
            {
                type: 'رياضيات',
                question: 'إذا كان لديك 3 علب، كل علبة فيها 12 قلم، كم عدد الأقلام الكلي؟',
                answers: ['30 قلم', '33 قلم', '36 قلم', '39 قلم'],
                correct: 2
            },
            {
                type: 'رياضيات',
                question: 'ما ناتج: 9 × 9 = ؟',
                answers: ['72', '81', '90', '99'],
                correct: 1
            },
            {
                type: 'رياضيات',
                question: 'كم عدد الزوايا في المربع؟',
                answers: ['2', '3', '4', '5'],
                correct: 2
            },
            {
                type: 'رياضيات',
                question: 'ما ناتج: 45 + 55 = ؟',
                answers: ['90', '95', '100', '105'],
                correct: 2
            },
            {
                type: 'رياضيات',
                question: 'إذا كان معك 20 ريال واشتريت لعبة بـ 8 ريال، كم يتبقى معك؟',
                answers: ['10 ريال', '12 ريال', '14 ريال', '15 ريال'],
                correct: 1
            },
            {
                type: 'رياضيات',
                question: 'ما ناتج: 6 × 7 = ؟',
                answers: ['36', '40', '42', '48'],
                correct: 2
            },
            {
                type: 'رياضيات',
                question: 'كم يساوي ربع 100؟',
                answers: ['20', '25', '30', '40'],
                correct: 1
            },
            {
                type: 'رياضيات',
                question: 'ما ناتج: 144 ÷ 12 = ؟',
                answers: ['10', '11', '12', '13'],
                correct: 2
            },
            {
                type: 'رياضيات',
                question: 'إذا كان في الصف 5 صفوف، كل صف فيه 6 طلاب، كم عدد الطلاب الكلي؟',
                answers: ['25', '28', '30', '32'],
                correct: 2
            },
            {
                type: 'رياضيات',
                question: 'ما ناتج: 250 - 125 = ؟',
                answers: ['115', '120', '125', '130'],
                correct: 2
            },
            {
                type: 'رياضيات',
                question: 'كم عدد أضلاع المستطيل؟',
                answers: ['2', '3', '4', '5'],
                correct: 2
            },
            {
                type: 'رياضيات',
                question: 'ما ناتج: 5 × 11 = ؟',
                answers: ['50', '55', '60', '65'],
                correct: 1
            },
            {
                type: 'رياضيات',
                question: 'إذا كان عدد صفحات الكتاب 200 صفحة وقرأت نصفه، كم صفحة قرأت؟',
                answers: ['90', '95', '100', '105'],
                correct: 2
            },

            // ألغاز لغوية (15 سؤال)
            {
                type: 'لغز',
                question: 'أنا موجود في البحر، وإذا أضفت لي حرف الألف في البداية أصبحت في السماء، فمن أنا؟',
                answers: ['سمك - أسماك', 'موج - أموج', 'نجم - أنجم', 'حوت - أحوت'],
                correct: 2
            },
            {
                type: 'لغز',
                question: 'شيء يمشي بلا رجلين ويبكي بلا عينين، ما هو؟',
                answers: ['الريح', 'الغيم', 'المطر', 'السحاب'],
                correct: 1
            },
            {
                type: 'لغز',
                question: 'له رأس ولا يفكر، وله أسنان ولا يأكل، ما هو؟',
                answers: ['المشط', 'المنشار', 'الثوم', 'جميع ما سبق'],
                correct: 3
            },
            {
                type: 'لغز',
                question: 'ما الشيء الذي كلما أخذت منه كبر؟',
                answers: ['البالون', 'الحفرة', 'الكيس', 'الصندوق'],
                correct: 1
            },
            {
                type: 'لغز',
                question: 'أنا في الشتاء خمسة، وفي الصيف ثلاثة، فمن أنا؟',
                answers: ['النقاط على كلمة شتاء', 'الأشهر', 'الحروف', 'الأيام'],
                correct: 0
            },
            {
                type: 'لغز',
                question: 'ما الشيء الذي يوجد في وسط باريس؟',
                answers: ['برج إيفل', 'نهر السين', 'حرف الراء', 'متحف اللوفر'],
                correct: 2
            },
            {
                type: 'لغز',
                question: 'ما الشيء الذي له عين ولا يرى؟',
                answers: ['الإبرة', 'الباب', 'النافذة', 'الكرسي'],
                correct: 0
            },
            {
                type: 'لغز',
                question: 'شيء نرميه عندما نحتاجه ونأخذه عندما لا نحتاجه، ما هو؟',
                answers: ['القلم', 'شبكة الصيد', 'المظلة', 'الحقيبة'],
                correct: 1
            },
            {
                type: 'لغز',
                question: 'ما الشيء الذي يكون أخضر في الأرض وأسود في السوق وأحمر في البيت؟',
                answers: ['الخس', 'الشاي', 'التفاح', 'الطماطم'],
                correct: 1
            },
            {
                type: 'لغز',
                question: 'ما الشيء الذي له أربع أرجل ولا يستطيع المشي؟',
                answers: ['الحيوان المريض', 'الكرسي', 'السرير', 'الكرسي والسرير'],
                correct: 3
            },
            {
                type: 'لغز',
                question: 'أنا أبدأ بالموت وأنتهي بالحياة، فمن أنا؟',
                answers: ['الليل', 'اليوم', 'النهار', 'الفجر'],
                correct: 0
            },
            {
                type: 'لغز',
                question: 'شيء إذا أكلت نصفه تموت، وإذا أكلته كله لا تموت، ما هو؟',
                answers: ['السم', 'السمسم', 'الدواء', 'الفلفل'],
                correct: 1
            },
            {
                type: 'لغز',
                question: 'ما الشيء الذي يسير بلا قدمين ويدخل الأذنين؟',
                answers: ['الماء', 'الصوت', 'الهواء', 'الضوء'],
                correct: 1
            },
            {
                type: 'لغز',
                question: 'ما الشيء الذي له جناحان ولا يطير؟',
                answers: ['الطائر المريض', 'الطاحونة', 'الطائرة', 'البطريق'],
                correct: 1
            },
            {
                type: 'لغز',
                question: 'شيء يوجد في السماء، فإذا أضفنا إليه حرفًا أصبح في الأرض، فما هو؟',
                answers: ['نجم - منجم', 'قمر - حمر', 'سحاب - أسحاب', 'غيم - غنيم'],
                correct: 0
            },

            // أسئلة علوم (15 سؤال)
            {
                type: 'علوم',
                question: 'كم عدد الكواكب في المجموعة الشمسية؟',
                answers: ['7 كواكب', '8 كواكب', '9 كواكب', '10 كواكب'],
                correct: 1
            },
            {
                type: 'علوم',
                question: 'ما هو أكبر كوكب في المجموعة الشمسية؟',
                answers: ['الأرض', 'زحل', 'المشتري', 'أورانوس'],
                correct: 2
            },
            {
                type: 'علوم',
                question: 'ما هو الحيوان الذي يعتبر أسرع حيوان بري؟',
                answers: ['الأسد', 'الفهد', 'الحصان', 'الكلب'],
                correct: 1
            },
            {
                type: 'علوم',
                question: 'كم عدد أرجل العنكبوت؟',
                answers: ['6 أرجل', '8 أرجل', '10 أرجل', '12 رجل'],
                correct: 1
            },
            {
                type: 'علوم',
                question: 'ما هو الغاز الذي تحتاجه النباتات لصنع غذائها؟',
                answers: ['الأكسجين', 'النيتروجين', 'ثاني أكسيد الكربون', 'الهيدروجين'],
                correct: 2
            },
            {
                type: 'علوم',
                question: 'ما هو أكبر حيوان في العالم؟',
                answers: ['الفيل', 'الحوت الأزرق', 'الزرافة', 'القرش'],
                correct: 1
            },
            {
                type: 'علوم',
                question: 'ما هو الجهاز المسؤول عن ضخ الدم في جسم الإنسان؟',
                answers: ['الرئتان', 'القلب', 'الكبد', 'المعدة'],
                correct: 1
            },
            {
                type: 'علوم',
                question: 'كم عدد أسنان الإنسان البالغ؟',
                answers: ['28 سن', '30 سن', '32 سن', '34 سن'],
                correct: 2
            },
            {
                type: 'علوم',
                question: 'ما هي المادة التي تجعل النباتات خضراء اللون؟',
                answers: ['الكلوروفيل', 'الماء', 'الأكسجين', 'السكر'],
                correct: 0
            },
            {
                type: 'علوم',
                question: 'أي من هذه الحيوانات يعيش في الماء؟',
                answers: ['الأسد', 'الدلفين', 'النمر', 'الأرنب'],
                correct: 1
            },
            {
                type: 'علوم',
                question: 'ما هو الكوكب الأقرب للشمس؟',
                answers: ['الزهرة', 'عطارد', 'المريخ', 'الأرض'],
                correct: 1
            },
            {
                type: 'علوم',
                question: 'كم عدد عظام جسم الإنسان البالغ؟',
                answers: ['196 عظمة', '206 عظمة', '216 عظمة', '226 عظمة'],
                correct: 1
            },
            {
                type: 'علوم',
                question: 'ما اسم العملية التي تصنع بها النباتات غذاءها؟',
                answers: ['التنفس', 'البناء الضوئي', 'الهضم', 'التبخر'],
                correct: 1
            },
            {
                type: 'علوم',
                question: 'أي من هذه الحيوانات من الثدييات؟',
                answers: ['السمك', 'الضفدع', 'الحوت', 'التمساح'],
                correct: 2
            },
            {
                type: 'علوم',
                question: 'ما هي الحاسة المسؤولة عن الشم؟',
                answers: ['العين', 'الأنف', 'الأذن', 'اللسان'],
                correct: 1
            },

            // أسئلة لغة عربية (15 سؤال)
            {
                type: 'لغة عربية',
                question: 'ما جمع كلمة "كتاب"؟',
                answers: ['كتابات', 'كتب', 'كتاتيب', 'مكتوب'],
                correct: 1
            },
            {
                type: 'لغة عربية',
                question: 'ما عكس كلمة "نهار"؟',
                answers: ['ليل', 'مساء', 'صباح', 'ظلام'],
                correct: 0
            },
            {
                type: 'لغة عربية',
                question: 'كم عدد حروف الهجاء العربية؟',
                answers: ['26 حرف', '27 حرف', '28 حرف', '29 حرف'],
                correct: 2
            },
            {
                type: 'لغة عربية',
                question: 'ما مفرد كلمة "أطفال"؟',
                answers: ['طفولة', 'طفل', 'طفيل', 'طافل'],
                correct: 1
            },
            {
                type: 'لغة عربية',
                question: 'ما جمع كلمة "قلم"؟',
                answers: ['أقلام', 'قلمات', 'مقالم', 'قلوم'],
                correct: 0
            },
            {
                type: 'لغة عربية',
                question: 'ما عكس كلمة "كبير"؟',
                answers: ['قصير', 'صغير', 'ضعيف', 'رقيق'],
                correct: 1
            },
            {
                type: 'لغة عربية',
                question: 'أي من هذه الكلمات اسم؟',
                answers: ['يكتب', 'جميل', 'محمد', 'في'],
                correct: 2
            },
            {
                type: 'لغة عربية',
                question: 'كم عدد حروف كلمة "مدرسة"؟',
                answers: ['4 حروف', '5 حروف', '6 حروف', '7 حروف'],
                correct: 1
            },
            {
                type: 'لغة عربية',
                question: 'ما مفرد كلمة "أشجار"؟',
                answers: ['شجر', 'شجرة', 'شجيرة', 'تشجير'],
                correct: 1
            },
            {
                type: 'لغة عربية',
                question: 'ما عكس كلمة "سريع"؟',
                answers: ['بطيء', 'ثقيل', 'خفيف', 'قصير'],
                correct: 0
            },
            {
                type: 'لغة عربية',
                question: 'أي من هذه الكلمات فعل؟',
                answers: ['كتاب', 'يلعب', 'جميل', 'مدرسة'],
                correct: 1
            },
            {
                type: 'لغة عربية',
                question: 'ما جمع كلمة "باب"؟',
                answers: ['بيبان', 'أبواب', 'بوابات', 'بابات'],
                correct: 1
            },
            {
                type: 'لغة عربية',
                question: 'ما عكس كلمة "جديد"؟',
                answers: ['قديم', 'حديث', 'صغير', 'كبير'],
                correct: 0
            },
            {
                type: 'لغة عربية',
                question: 'كم عدد الحركات في اللغة العربية؟',
                answers: ['2', '3', '4', '5'],
                correct: 1
            },
            {
                type: 'لغة عربية',
                question: 'ما مفرد كلمة "طيور"؟',
                answers: ['طائر', 'طير', 'طيار', 'طائرة'],
                correct: 1
            },

            // أسئلة التربية الإسلامية (20 سؤال)
            {
                type: 'تربية إسلامية',
                question: 'كم عدد أركان الإسلام؟',
                answers: ['3 أركان', '4 أركان', '5 أركان', '6 أركان'],
                correct: 2
            },
            {
                type: 'تربية إسلامية',
                question: 'ما هو أول ركن من أركان الإسلام؟',
                answers: ['الصلاة', 'الشهادتان', 'الزكاة', 'الصوم'],
                correct: 1
            },
            {
                type: 'تربية إسلامية',
                question: 'كم عدد الصلوات المفروضة في اليوم؟',
                answers: ['3 صلوات', '4 صلوات', '5 صلوات', '6 صلوات'],
                correct: 2
            },
            {
                type: 'تربية إسلامية',
                question: 'ما اسم الشهر الذي نصوم فيه؟',
                answers: ['رجب', 'شعبان', 'رمضان', 'شوال'],
                correct: 2
            },
            {
                type: 'تربية إسلامية',
                question: 'ما اسم كتاب المسلمين المقدس؟',
                answers: ['الإنجيل', 'التوراة', 'القرآن الكريم', 'الزبور'],
                correct: 2
            },
            {
                type: 'تربية إسلامية',
                question: 'من هو خاتم الأنبياء والمرسلين؟',
                answers: ['موسى عليه السلام', 'عيسى عليه السلام', 'إبراهيم عليه السلام', 'محمد صلى الله عليه وسلم'],
                correct: 3
            },
            {
                type: 'تربية إسلامية',
                question: 'كم عدد أركان الإيمان؟',
                answers: ['4 أركان', '5 أركان', '6 أركان', '7 أركان'],
                correct: 2
            },
            {
                type: 'تربية إسلامية',
                question: 'ما هي القبلة التي يتوجه إليها المسلمون في صلاتهم؟',
                answers: ['المسجد النبوي', 'الكعبة المشرفة', 'المسجد الأقصى', 'جبل عرفات'],
                correct: 1
            },
            {
                type: 'تربية إسلامية',
                question: 'في أي مدينة ولد الرسول صلى الله عليه وسلم؟',
                answers: ['المدينة المنورة', 'مكة المكرمة', 'القدس', 'الطائف'],
                correct: 1
            },
            {
                type: 'تربية إسلامية',
                question: 'كم عدد ركعات صلاة الظهر؟',
                answers: ['2 ركعة', '3 ركعات', '4 ركعات', '5 ركعات'],
                correct: 2
            },
            {
                type: 'تربية إسلامية',
                question: 'ما هو اسم الملك الذي ينزل بالوحي؟',
                answers: ['ميكائيل', 'إسرافيل', 'جبريل', 'عزرائيل'],
                correct: 2
            },
            {
                type: 'تربية إسلامية',
                question: 'ما اسم أول سورة في القرآن الكريم؟',
                answers: ['البقرة', 'الفاتحة', 'الناس', 'الإخلاص'],
                correct: 1
            },
            {
                type: 'تربية إسلامية',
                question: 'كم مرة ذكر اسم "محمد" في القرآن الكريم؟',
                answers: ['3 مرات', '4 مرات', '5 مرات', '6 مرات'],
                correct: 1
            },
            {
                type: 'تربية إسلامية',
                question: 'ما اسم زوجة الرسول صلى الله عليه وسلم الأولى؟',
                answers: ['عائشة', 'خديجة', 'حفصة', 'فاطمة'],
                correct: 1
            },
            {
                type: 'تربية إسلامية',
                question: 'من هو أبو البشر؟',
                answers: ['نوح عليه السلام', 'إبراهيم عليه السلام', 'آدم عليه السلام', 'محمد صلى الله عليه وسلم'],
                correct: 2
            },
            {
                type: 'تربية إسلامية',
                question: 'ما هي أول صلاة فرضت على المسلمين؟',
                answers: ['الفجر', 'الظهر', 'العصر', 'المغرب'],
                correct: 1
            },
            {
                type: 'تربية إسلامية',
                question: 'كم عدد سور القرآن الكريم؟',
                answers: ['110 سورة', '114 سورة', '120 سورة', '124 سورة'],
                correct: 1
            },
            {
                type: 'تربية إسلامية',
                question: 'ما اسم الليلة التي نزل فيها القرآن؟',
                answers: ['ليلة المعراج', 'ليلة القدر', 'ليلة النصف من شعبان', 'ليلة الإسراء'],
                correct: 1
            },
            {
                type: 'تربية إسلامية',
                question: 'من هو النبي الذي ابتلعه الحوت؟',
                answers: ['موسى عليه السلام', 'يونس عليه السلام', 'نوح عليه السلام', 'صالح عليه السلام'],
                correct: 1
            },
            {
                type: 'تربية إسلامية',
                question: 'ما هو شهر الحج؟',
                answers: ['رمضان', 'شوال', 'ذو القعدة', 'ذو الحجة'],
                correct: 3
            },

            // أسئلة التربية الاجتماعية (20 سؤال)
            {
                type: 'تربية اجتماعية',
                question: 'ما هي عاصمة المملكة العربية السعودية؟',
                answers: ['جدة', 'مكة المكرمة', 'الرياض', 'الدمام'],
                correct: 2
            },
            {
                type: 'تربية اجتماعية',
                question: 'من هو مؤسس المملكة العربية السعودية؟',
                answers: ['الملك فيصل', 'الملك عبدالعزيز', 'الملك سعود', 'الملك خالد'],
                correct: 1
            },
            {
                type: 'تربية اجتماعية',
                question: 'في أي قارة تقع المملكة العربية السعودية؟',
                answers: ['أفريقيا', 'آسيا', 'أوروبا', 'أمريكا'],
                correct: 1
            },
            {
                type: 'تربية اجتماعية',
                question: 'ما هو اليوم الوطني للمملكة العربية السعودية؟',
                answers: ['1 محرم', '23 سبتمبر', '1 رمضان', '9 ذو الحجة'],
                correct: 1
            },
            {
                type: 'تربية اجتماعية',
                question: 'ما هي ألوان علم المملكة العربية السعودية؟',
                answers: ['أخضر وأبيض', 'أحمر وأبيض', 'أزرق وأصفر', 'أسود وأحمر'],
                correct: 0
            },
            {
                type: 'تربية اجتماعية',
                question: 'كم عدد مناطق المملكة الإدارية؟',
                answers: ['10 مناطق', '11 منطقة', '12 منطقة', '13 منطقة'],
                correct: 3
            },
            {
                type: 'تربية اجتماعية',
                question: 'ما اسم البحر الذي يقع غرب المملكة؟',
                answers: ['البحر الأبيض المتوسط', 'البحر الأحمر', 'الخليج العربي', 'بحر العرب'],
                correct: 1
            },
            {
                type: 'تربية اجتماعية',
                question: 'أين تقع الكعبة المشرفة؟',
                answers: ['المدينة المنورة', 'مكة المكرمة', 'جدة', 'الطائف'],
                correct: 1
            },
            {
                type: 'تربية اجتماعية',
                question: 'ما هي عملة المملكة العربية السعودية؟',
                answers: ['الدينار', 'الدرهم', 'الريال', 'الجنيه'],
                correct: 2
            },
            {
                type: 'تربية اجتماعية',
                question: 'كم عدد دول الخليج العربي؟',
                answers: ['5 دول', '6 دول', '7 دول', '8 دول'],
                correct: 1
            },
            {
                type: 'تربية اجتماعية',
                question: 'ما هو أطول نهر في العالم؟',
                answers: ['نهر النيل', 'نهر الأمازون', 'نهر المسيسيبي', 'نهر الفرات'],
                correct: 0
            },
            {
                type: 'تربية اجتماعية',
                question: 'كم عدد القارات في العالم؟',
                answers: ['5 قارات', '6 قارات', '7 قارات', '8 قارات'],
                correct: 2
            },
            {
                type: 'تربية اجتماعية',
                question: 'ما هي أكبر قارة في العالم؟',
                answers: ['أفريقيا', 'آسيا', 'أوروبا', 'أمريكا'],
                correct: 1
            },
            {
                type: 'تربية اجتماعية',
                question: 'في أي عام تأسست المملكة العربية السعودية؟',
                answers: ['1930م', '1932م', '1934م', '1936م'],
                correct: 1
            },
            {
                type: 'تربية اجتماعية',
                question: 'ما هي أكبر مدينة سعودية من حيث المساحة؟',
                answers: ['الرياض', 'جدة', 'مكة المكرمة', 'المدينة المنورة'],
                correct: 0
            },
            {
                type: 'تربية اجتماعية',
                question: 'ما اسم الخليج الذي يقع شرق المملكة؟',
                answers: ['البحر الأحمر', 'الخليج العربي', 'خليج عمان', 'خليج عدن'],
                correct: 1
            },
            {
                type: 'تربية اجتماعية',
                question: 'كم عدد أيام الأسبوع؟',
                answers: ['5 أيام', '6 أيام', '7 أيام', '8 أيام'],
                correct: 2
            },
            {
                type: 'تربية اجتماعية',
                question: 'كم عدد فصول السنة؟',
                answers: ['2', '3', '4', '5'],
                correct: 2
            },
            {
                type: 'تربية اجتماعية',
                question: 'ما هي عاصمة مصر؟',
                answers: ['الإسكندرية', 'القاهرة', 'الجيزة', 'أسوان'],
                correct: 1
            },
            {
                type: 'تربية اجتماعية',
                question: 'ما هو أكبر محيط في العالم؟',
                answers: ['المحيط الأطلسي', 'المحيط الهندي', 'المحيط الهادئ', 'المحيط المتجمد الشمالي'],
                correct: 2
            },

            // أسئلة ثقافة عامة (15 سؤال)
            {
                type: 'ثقافة عامة',
                question: 'كم عدد ألوان قوس قزح؟',
                answers: ['5 ألوان', '6 ألوان', '7 ألوان', '8 ألوان'],
                correct: 2
            },
            {
                type: 'ثقافة عامة',
                question: 'ما هو الحيوان الذي يعتبر ملك الغابة؟',
                answers: ['النمر', 'الأسد', 'الفيل', 'الدب'],
                correct: 1
            },
            {
                type: 'ثقافة عامة',
                question: 'كم عدد أيام السنة؟',
                answers: ['360 يوم', '364 يوم', '365 يوم', '366 يوم'],
                correct: 2
            },
            {
                type: 'ثقافة عامة',
                question: 'كم عدد ساعات اليوم؟',
                answers: ['20 ساعة', '22 ساعة', '24 ساعة', '26 ساعة'],
                correct: 2
            },
            {
                type: 'ثقافة عامة',
                question: 'ما هو أطول حيوان في العالم؟',
                answers: ['الفيل', 'الزرافة', 'الحوت', 'التمساح'],
                correct: 1
            },
            {
                type: 'ثقافة عامة',
                question: 'كم عدد أشهر السنة؟',
                answers: ['10 أشهر', '11 شهر', '12 شهر', '13 شهر'],
                correct: 2
            },
            {
                type: 'ثقافة عامة',
                question: 'ما هو لون السماء في النهار؟',
                answers: ['أحمر', 'أخضر', 'أزرق', 'أصفر'],
                correct: 2
            },
            {
                type: 'ثقافة عامة',
                question: 'كم عدد الحواس عند الإنسان؟',
                answers: ['3', '4', '5', '6'],
                correct: 2
            },
            {
                type: 'ثقافة عامة',
                question: 'ما هي الفاكهة التي يقشر قبل أن يؤكل؟',
                answers: ['التفاح', 'الموز', 'العنب', 'الفراولة'],
                correct: 1
            },
            {
                type: 'ثقافة عامة',
                question: 'كم عدد أصابع اليد الواحدة؟',
                answers: ['4', '5', '6', '7'],
                correct: 1
            },
            {
                type: 'ثقافة عامة',
                question: 'ما هو الطائر الذي لا يطير؟',
                answers: ['الحمام', 'النعامة', 'الصقر', 'النسر'],
                correct: 1
            },
            {
                type: 'ثقافة عامة',
                question: 'ما هو الشكل الذي له ثلاثة أضلاع؟',
                answers: ['المربع', 'المثلث', 'الدائرة', 'المستطيل'],
                correct: 1
            },
            {
                type: 'ثقافة عامة',
                question: 'كم عدد جناحي الفراشة؟',
                answers: ['2', '3', '4', '6'],
                correct: 0
            },
            {
                type: 'ثقافة عامة',
                question: 'ما هو المشروب الذي يأتي من البقرة؟',
                answers: ['الماء', 'العصير', 'الحليب', 'الشاي'],
                correct: 2
            },
            {
                type: 'ثقافة عامة',
                question: 'في أي فصل تتساقط أوراق الأشجار؟',
                answers: ['الربيع', 'الصيف', 'الخريف', 'الشتاء'],
                correct: 2
            }
        ];

        let currentQuestion = null;
        let usedQuestions = [];

        // Confetti function
        function createConfetti() {
            const colors = ['#ff6b6b', '#4ecdc4', '#95e1d3', '#f9ca24', '#f093fb', '#51cf66'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                document.body.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        // Show encouragement message
        function showEncouragement(message) {
            const encouragementEl = document.getElementById('encouragement');
            encouragementEl.textContent = message;
            encouragementEl.classList.add('show');
            
            setTimeout(() => {
                encouragementEl.classList.remove('show');
            }, 3000);
        }

        // Timer functions
        function startTimer() {
            stopTimer();
            timeLeft = 30;
            timerPaused = false;
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                if (!timerPaused) {
                    timeLeft--;
                    updateTimerDisplay();
                    
                    if (timeLeft <= 0) {
                        stopTimer();
                        timeUp();
                    }
                }
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function pauseTimer() {
            timerPaused = !timerPaused;
            const pauseBtn = document.getElementById('pause-btn');
            if (timerPaused) {
                pauseBtn.textContent = '▶️ استئناف المؤقت';
                pauseBtn.style.background = 'linear-gradient(135deg, #51cf66, #37b24d)';
            } else {
                pauseBtn.textContent = '⏸️ إيقاف المؤقت';
                pauseBtn.style.background = 'linear-gradient(135deg, #868e96, #495057)';
            }
        }

        function updateTimerDisplay() {
            const timerElement = document.getElementById('timer');
            timerElement.textContent = timeLeft;
            
            timerElement.classList.remove('warning', 'danger');
            if (timeLeft <= 10 && timeLeft > 5) {
                timerElement.classList.add('warning');
            } else if (timeLeft <= 5) {
                timerElement.classList.add('danger');
            }
        }

        function timeUp() {
            const randomMsg = wrongMessages[Math.floor(Math.random() * wrongMessages.length)];
            showEncouragement(randomMsg);
            wrongAnswer();
        }

        // Initialize game
        function init() {
            updateDisplay();
            showQuestion();
        }

        // Show random question
        function showQuestion() {
            stopTimer();
            
            // Reset if all questions used
            if (usedQuestions.length >= questions.length) {
                usedQuestions = [];
            }

            // Get unused question
            let availableQuestions = questions.filter((q, index) => !usedQuestions.includes(index));
            let randomIndex = Math.floor(Math.random() * availableQuestions.length);
            currentQuestion = availableQuestions[randomIndex];
            
            // Mark as used
            let originalIndex = questions.indexOf(currentQuestion);
            usedQuestions.push(originalIndex);

            // Display question
            document.getElementById('question-type').textContent = currentQuestion.type;
            document.getElementById('question-text').textContent = currentQuestion.question;

            // Display answers
            let answersHTML = '';
            currentQuestion.answers.forEach((answer, index) => {
                answersHTML += `
                    <button class="answer-btn" onclick="checkAnswer(${index})">
                        ${index + 1}. ${answer}
                    </button>
                `;
            });
            document.getElementById('answers-container').innerHTML = answersHTML;

            questionCount++;
            updateStats();
            startTimer();
        }

        // Check answer
        function checkAnswer(index) {
            stopTimer();
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.style.pointerEvents = 'none';
            });

            if (index === currentQuestion.correct) {
                buttons[index].classList.add('correct');
                const randomMsg = correctMessages[Math.floor(Math.random() * correctMessages.length)];
                showEncouragement(randomMsg);
                createConfetti();
                setTimeout(() => {
                    correctAnswer();
                    buttons.forEach(btn => {
                        btn.disabled = false;
                        btn.style.pointerEvents = 'auto';
                    });
                }, 2000);
            } else {
                buttons[index].classList.add('wrong');
                buttons[currentQuestion.correct].classList.add('correct');
                const randomMsg = wrongMessages[Math.floor(Math.random() * wrongMessages.length)];
                showEncouragement(randomMsg);
                setTimeout(() => {
                    wrongAnswer();
                    buttons.forEach(btn => {
                        btn.disabled = false;
                        btn.style.pointerEvents = 'auto';
                    });
                }, 2000);
            }
        }

        // Correct answer
        function correctAnswer() {
            stopTimer();
            teams[currentTeam].score += 3;
            teams[currentTeam].position++;
            
            if (teams[currentTeam].position >= maxPosition) {
                teams[currentTeam].position = maxPosition;
                showWinner();
            } else {
                nextTurn();
            }
            updateDisplay();
        }

        // Wrong answer
        function wrongAnswer() {
            stopTimer();
            teams[currentTeam].score -= 1;
            if (teams[currentTeam].score < 0) teams[currentTeam].score = 0;
            nextTurn();
            updateDisplay();
        }

        // Skip question
        function skipQuestion() {
            stopTimer();
            nextTurn();
            showQuestion();
        }

        // Next turn
        function nextTurn() {
            currentTeam = (currentTeam + 1) % 4;
            updateDisplay();
            showQuestion();
        }

        // Update display
        function updateDisplay() {
            teams.forEach((team, index) => {
                document.getElementById(`team${index + 1}-score`).textContent = team.score;
                document.getElementById(`team${index + 1}-position`).textContent = `المحطة: ${team.position}/${maxPosition}`;
                
                // Update marker position
                const marker = document.getElementById(`marker${index + 1}`);
                const percentage = (team.position / maxPosition) * 100;
                marker.style.right = `${percentage}%`;
            });

            // Update current team display
            const team = teams[currentTeam];
            const teamColors = ['linear-gradient(135deg, #ff6b6b, #ee5a52)', 'linear-gradient(135deg, #4ecdc4, #44a39b)', 'linear-gradient(135deg, #95e1d3, #7fccc0)', 'linear-gradient(135deg, #f9ca24, #f0932b)'];
            document.getElementById('current-team-display').style.background = teamColors[currentTeam];
            document.getElementById('current-team-display').style.color = 'white';
            document.getElementById('current-team-display').textContent = `دور الفريق: ${team.name} ${team.icon}`;
            document.getElementById('current-team-name').textContent = team.name;
        }

        // Update stats
        function updateStats() {
            document.getElementById('question-number').textContent = questionCount;
            document.getElementById('remaining-questions').textContent = questions.length - usedQuestions.length;
        }

        // Deduction modal functions
        function openDeductModal(teamIndex) {
            selectedTeamForDeduction = teamIndex;
            document.getElementById('deduct-team-name').textContent = teams[teamIndex].name;
            document.getElementById('deduction-amount').value = 1;
            document.getElementById('deduction-modal').style.display = 'flex';
        }

        function closeDeductModal() {
            document.getElementById('deduction-modal').style.display = 'none';
        }

        function confirmDeduction() {
            const amount = parseInt(document.getElementById('deduction-amount').value);
            if (amount > 0) {
                teams[selectedTeamForDeduction].score -= amount;
                if (teams[selectedTeamForDeduction].score < 0) {
                    teams[selectedTeamForDeduction].score = 0;
                }
                updateDisplay();
                closeDeductModal();
            }
        }

        // Show winner
        function showWinner() {
            stopTimer();
            const team = teams[currentTeam];
            document.getElementById('winner-text').textContent = `${team.icon} ${team.name} ${team.icon}`;
            document.getElementById('winner-modal').style.display = 'flex';
            createConfetti();
            setTimeout(createConfetti, 1000);
            setTimeout(createConfetti, 2000);
        }

        // Close modal
        function closeModal() {
            document.getElementById('winner-modal').style.display = 'none';
        }

        // Reset game
        function resetGame() {
            if (confirm('هل أنت متأكد من إعادة اللعبة؟ سيتم حذف جميع النقاط!')) {
                stopTimer();
                teams.forEach(team => {
                    team.score = 0;
                    team.position = 0;
                });
                currentTeam = 0;
                questionCount = 0;
                usedQuestions = [];
                timerPaused = false;
                document.getElementById('pause-btn').textContent = '⏸️ إيقاف المؤقت';
                document.getElementById('pause-btn').style.background = 'linear-gradient(135deg, #868e96, #495057)';
                updateDisplay();
                showQuestion();
            }
        }

        // Start game on load
        window.onload = init;
    </script>
</body>
</html>